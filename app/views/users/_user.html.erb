<%= link_to user, id: dom_id(user), class: "user-card" do %>
  <div class="user-header">
    <div class="user-avatar">
      <% if user.google_avatar_url.present? %>
        <img src="<%= user.google_avatar_url %>" alt="<%= user.first_name %>'s avatar" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
        <div class="avatar-initials" style="display: none;">
          <%= user.first_name&.first&.upcase %><%= user.last_name&.first&.upcase %>
        </div>
      <% else %>
        <div class="avatar-initials">
          <%= user.first_name&.first&.upcase %><%= user.last_name&.first&.upcase %>
        </div>
      <% end %>
    </div>
    <div class="user-info">
      <h3 class="user-name"><%= user.first_name %> <%= user.last_name %></h3>
      <p class="user-email"><%= user.email %></p>
      <% if user.role.present? %>
        <span class="user-role badge"><%= user.role.titleize %></span>
      <% end %>
      <% user.organizational_roles.each do |org_role| %>
        <span class="org-role badge"><%= org_role.name %></span>
      <% end %>
    </div>
    <div class="user-points">
      <strong>Points:</strong> <%= user.points %>
    </div>
  </div>
<% end %>
