<% content_for :title, "Role Applications" %>

<div style="padding: 20px;">
  <h1>Role Applications</h1>
  <p style="color: #666; margin-bottom: 30px;">Review and manage all submitted applications.</p>

  <% if @role_applications.any? %>
    <div style="display: grid; gap: 20px;">
      <% @role_applications.each do |application| %>
        <div style="background-color: #f8f9fa; border: 1px solid #dee2e6; border-radius: 4px; padding: 20px;">
          <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
            <div>
              <h3 style="margin: 0 0 5px 0;"><%= application.user.first_name %> <%= application.user.last_name %></h3>
              <p style="color: #6c757d; margin: 0;"><%= application.user.email %></p>
            </div>
            <span style="background-color: #007bff; color: white; padding: 5px 15px; border-radius: 20px; font-size: 14px;">
              <%= application.organizational_role.name %>
            </span>
          </div>

          <div style="margin-bottom: 10px;">
            <strong>Submitted:</strong> <%= application.created_at.strftime("%B %d, %Y at %I:%M %p") %>
          </div>

          <div style="margin-bottom: 15px;">
            <strong>Resume:</strong>
            <% if application.user.resume&.file&.attached? %>
              <%= link_to application.user.resume.file.filename, user_resume_path(application.user), target: "_blank", style: "color: #007bff;" %>
            <% else %>
              <span style="color: #dc3545;">No resume</span>
            <% end %>
          </div>

          <div style="margin-bottom: 15px;">
            <strong>Essay:</strong>
            <div style="background-color: white; border: 1px solid #dee2e6; border-radius: 4px; padding: 10px; margin-top: 5px; max-height: 150px; overflow-y: auto;">
              <%= simple_format(application.essay) %>
            </div>
          </div>

          <div style="display: flex; gap: 10px;">
            <%= link_to "View Full Application", admin_panel_role_application_path(application), 
                style: "display: inline-block; padding: 8px 16px; background-color: #007bff; color: white; text-decoration: none; border-radius: 4px;" %>
            <%= button_to "Delete", admin_panel_role_application_path(application), 
                method: :delete,
                data: { turbo_confirm: "Are you sure you want to delete this application?" },
                style: "display: inline-block; padding: 8px 16px; background-color: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer;" %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div style="background-color: #fff3cd; border: 1px solid #ffc107; color: #856404; padding: 15px; border-radius: 4px;">
      No applications have been submitted yet.
    </div>
  <% end %>
</div>
