<div class="admin-sponsors-page">
  <div class="page-header">
    <h1>Sponsor Management</h1>
    <div class="header-actions">
      <%= button_to "Create New Sponsor", new_admin_panel_sponsor_path, method: :get, class: "btn btn-primary", form: { style: 'display: inline;' } %>
    </div>
  </div>

  <% if @sponsors.any? %>
    <div class="sponsors-table-wrapper">
      <table class="sponsors-table">
        <thead>
          <tr>
            <th>Company Name</th>
            <th>Website</th>
            <th>Tier</th>
            <th>Contact Email</th>
            <th>Resume Access</th>
            <th>Users</th>
            <th class="actions-column">Actions</th>
          </tr>
        </thead>

        <tbody>
          <% @sponsors.each do |sponsor| %>
            <tr <%= 'class="default-sponsor-row"'.html_safe if sponsor.default_sponsor? %>>
              <td class="company-name">
                <%= sponsor.company_name %>
                <% if sponsor.default_sponsor? %>
                  <span class="default-badge">DEFAULT</span>
                <% end %>
              </td>
              <td><%= sponsor.website %></td>
              <td><span class="tier-badge tier-<%= sponsor.tier&.downcase %>"><%= sponsor.tier %></span></td>
              <td><%= sponsor.contact_email %></td>
              <td class="resume-access"><%= sponsor.resume_access? ? "Yes" : "No" %></td>
              <td class="users-count"><%= sponsor.users.count %></td>
              <td class="actions-cell">
                <%= button_to "View", admin_panel_sponsor_path(sponsor), method: :get, class: "btn btn-primary", form: { style: 'display: inline;' } %>
                <% unless sponsor.default_sponsor? %>
                  <%= button_to "Edit", edit_admin_panel_sponsor_path(sponsor), method: :get, class: "btn btn-outline", form: { style: 'display: inline;' } %>
                  <%= button_to 'Delete', admin_panel_sponsor_path(sponsor),
                    method: :delete,
                    class: "btn btn-danger",
                    data: { turbo_confirm: "Are you sure? All users assigned to this sponsor will be moved to the default sponsor." },
                    form: { style: 'display: inline;' } %>
                <% else %>
                  <span class="cannot-edit-text">Cannot edit/delete</span>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  <% else %>
    <div class="empty-state">
      <p>No sponsors found.</p>
    </div>
  <% end %>

  <div class="page-footer">
    <%= button_to 'Back to Admin Dashboard', admin_panel_root_path, method: :get, class: "btn btn-outline", form: { style: 'display: inline;' } %>
  </div>
</div>