<h1>Sponsor Management</h1>

<div class="actions">
  <%= link_to "Create New Sponsor", new_admin_panel_sponsor_path %>
</div>

<div class="sponsors-section">
  <h2>Sponsors</h2>
  <% if @sponsors.any? %>
    <table>
      <thead>
        <tr>
          <th>Company Name</th>
          <th>Website</th>
          <th>Tier</th>
          <th>Contact Email</th>
          <th>Resume Access</th>
          <th>Users</th>
          <th>Actions</th>
        </tr>
      </thead>

      <tbody>
        <% @sponsors.each do |sponsor| %>
          <tr <%= 'style="background-color: #f8f9fa;"'.html_safe if sponsor.default_sponsor? %>>
            <td>
              <%= sponsor.company_name %>
              <% if sponsor.default_sponsor? %>
                <span style="background-color: #6c757d; color: white; padding: 2px 6px; border-radius: 3px; font-size: 11px; margin-left: 5px;">DEFAULT</span>
              <% end %>
            </td>
            <td><%= sponsor.website %></td>
            <td><%= sponsor.tier %></td>
            <td><%= sponsor.contact_email %></td>
            <td><%= sponsor.resume_access? ? "Yes" : "No" %></td>
            <td><%= sponsor.users.count %></td>
            <td>
              <%= link_to "View", admin_panel_sponsor_path(sponsor) %>
              <% unless sponsor.default_sponsor? %>
                <%= link_to "Edit", edit_admin_panel_sponsor_path(sponsor) %>
                <%= button_to 'Delete', admin_panel_sponsor_path(sponsor),
                  method: :delete,
                  data: { confirm: "Are you sure? All users assigned to this sponsor will be moved to the default sponsor." } %>
              <% else %>
                <span style="color: #999; font-size: 13px;">Cannot edit/delete</span>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <p>No sponsors found.</p>
  <% end %>
</div>

<div class="actions">
  <%= link_to 'Back to Admin Dashboard', admin_panel_root_path %>
</div>